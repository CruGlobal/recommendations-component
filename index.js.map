{"mappings":"4zBAOA,MAiDQA,EApCFC,EAAgC,CACpCC,QAHkB,gCAIlBC,OAAM,GAAAC,OAJY,gCAIZ,WACNC,KAAI,GAAAD,OALc,gCAKd,SACJE,MAAK,GAAAF,OANa,gCAMb,UACLG,SAAQ,GAAAH,OAPU,gCAOV,aACRI,MAAK,GAAAJ,OARa,gCAQb,WAGDK,EAAwB,SAC5BC,EACAC,GAF4B,MAAA,iBAAAP,OAIhBO,EAAQT,QAJQ,qBAAAE,OAKfO,EAAQR,OALO,iCAAAC,OAM5BM,EAAgBE,QAChB,SAACC,EAADC,EAA6CC,GAA7C,IAAWP,EAAXM,EAAWN,MAAOD,EAAlBO,EAAkBP,SAAUS,EAA5BF,EAA4BE,IAAKC,EAAjCH,EAAiCG,SAAjC,MAAA,GAAAb,OACKS,EADL,uBAAAT,OAGWY,EAHX,aAAAZ,OAG0BO,EAAQN,KAHlC,UAAAD,OAlBkB,gCAkBlB,oBAAAA,OAIIW,EAAQ,EAJZ,8FAAAX,OAMIW,EAAQ,EANZ,+BAAAX,OAOgCa,EAPhC,6BAAAb,OAOoEI,EAPpE,2BAAAJ,OAQca,EARd,aAAAb,OAQkCO,EAAQL,MAR1C,WAAAF,OAQyDI,EARzD,sCAAAJ,OAUiBO,EAAQJ,SAVzB,MAAAH,OAUsCG,EAVtC,4BAAAH,OAWiBO,EAAQH,MAXzB,MAAAJ,OAWmCI,EAXnC,+BAcA,IArB4B,eA0BjBU,EAA8B,CACzCC,UAAMC,mBAAAC,MAAE,SAAAC,EACNC,GADM,IAAAC,EAAAC,EAAAT,EAAAU,EAAAC,EAAAjB,EAAAkB,EAAAC,UAAA,OAAAT,mBAAAU,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAT,EAAAI,EAAAM,OAAA,QAAAC,IAAAP,EAAA,GAAAA,EAAA,GAKkD,GALlDH,EAAAD,EAGJR,IAAAA,OAHI,IAAAS,EAGEW,OAAOC,SAASC,KAHlBb,EAIJC,EAJIF,EAIJE,WAJIK,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAQmBM,MAAK,GAAAnC,OAzDnB,yDAyDmBA,OAAaoC,mBAAmBxB,GAAhC,UARxB,KAAA,EAAA,IAQEW,EARFI,EAAAU,MASUC,GATV,CAAAX,EAAAE,KAAA,EAAA,MAAA,MAUI,IAAIU,MAAMhB,EAASiB,YAVvB,KAAA,EAAA,OAAAb,EAAAE,KAAA,EAY4CN,EAASkB,OAZrD,KAAA,EAYEnC,EAZFqB,EAAAU,KAaJlB,EAAUuB,UAAYrC,EAAsBC,EAADqC,EAAAA,EAAA,GACtC9C,GACAyB,IAfDK,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAA,MAAAF,EAAAC,KAAA,GAAAD,EAAAiB,GAAAjB,EAAA,MAAA,GAkBE,IAAIY,MAAJ,4CAAAvC,OAAA2B,EAAAiB,KAlBF,KAAA,GAAA,IAAA,MAAA,OAAAjB,EAAAkB,UAAA3B,EAAA,KAAA,CAAA,CAAA,EAAA,SAAFtB,gLAAA,SAAAkD,GAAA,OAAAlD,EAAAmD,MAAAC,KAAAvB,cA6BRO,OAAOlB,4BAA8BA","sources":["./index.ts"],"sourcesContent":["interface Recommendation {\n  uri: string;\n  title: string;\n  imageUri: string;\n  category: string;\n}\n\nconst apiUri = 'https://cru-content-based-filtering.s3.amazonaws.com/';\n\ninterface CssClasses {\n  wrapper: string;\n  header: string;\n  card: string;\n  image: string;\n  category: string;\n  title: string;\n}\n\nconst classPrefix = 'cru-recommendations-component';\n\nconst defaultClassNames: CssClasses = {\n  wrapper: classPrefix,\n  header: `${classPrefix}-header`,\n  card: `${classPrefix}-card`,\n  image: `${classPrefix}-image`,\n  category: `${classPrefix}-category`,\n  title: `${classPrefix}-title`,\n};\n\nconst recommendationsToHTML = (\n  recommendations: Recommendation[],\n  classes: CssClasses,\n) => `\n<div class=\"${classes.wrapper}\">\n  <h1 class=\"${classes.header}\">Recommended Articles</h1>\n${recommendations.reduce(\n  (output, { title, category, uri, imageUri }, index) =>\n    `${output}\n    \n  <a href=\"${uri}\" class=\"${classes.card}\" id=\"${classPrefix}-recommendation-${\n      index + 1\n    }\" onclick=\"window.dataLayer?.push({ event:'recommendation-click', recommendationNumber: ${\n      index + 1\n    }, recommendationImageUri: '${imageUri}', recommendationTitle: '${title}' })\">\n    <img src=\"${imageUri}\" class=\"${classes.image}\" alt=\"${title}\" />\n    <div>\n      <h2 class=\"${classes.category}\">${category}</h2>\n      <h3 class=\"${classes.title}\">${title}</h3>\n    </div>\n  </a>`,\n  '',\n)}\n</div>\n`;\n\nexport const cruRecommendationsComponent = {\n  render: async (\n    container: Element,\n    {\n      uri = window.location.href,\n      classNames,\n    }: { uri?: string; classNames?: Partial<CssClasses> } = {},\n  ) => {\n    try {\n      const response = await fetch(`${apiUri}${encodeURIComponent(uri)}.json`);\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      const recommendations: Recommendation[] = await response.json();\n      container.innerHTML = recommendationsToHTML(recommendations, {\n        ...defaultClassNames,\n        ...classNames,\n      });\n    } catch (error) {\n      throw new Error(`Error loading/rendering recommendations: ${error}`);\n    }\n  },\n};\n\ndeclare global {\n  interface Window {\n    cruRecommendationsComponent: typeof cruRecommendationsComponent;\n  }\n}\n\nwindow.cruRecommendationsComponent = cruRecommendationsComponent;\n"],"names":["_render","defaultClassNames","wrapper","header","concat","card","image","category","title","recommendationsToHTML","recommendations","classes","reduce","output","_ref","index","uri","imageUri","cruRecommendationsComponent","render","regeneratorRuntime","mark","_callee","container","_ref2","_ref2$uri","classNames","response","_args","arguments","wrap","_context","prev","next","length","undefined","window","location","href","fetch","encodeURIComponent","sent","ok","Error","statusText","json","innerHTML","$aecb294ebf007070902d177a699db$var$_objectSpread","t0","stop","_x","apply","this"],"version":3,"file":"index.js.map"}